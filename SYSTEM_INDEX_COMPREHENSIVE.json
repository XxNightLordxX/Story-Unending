{
  "metadata": {
    "version": "3.0",
    "type": "comprehensive",
    "lastUpdated": "2025-02-28",
    "project": "Story-Unending",
    "status": "Post-Consolidation Phase 2 Complete"
  },
  "executiveSummary": {
    "projectOverview": {
      "name": "Story-Unending",
      "type": "Web-based book reading platform",
      "keyFeatures": [
        "Procedural Story Generation",
        "Real-time Chapter Updates",
        "User Management",
        "Social Features",
        "Advanced UI"
      ]
    },
    "statistics": {
      "totalFiles": 200,
      "javascriptModules": 32,
      "uiComponents": 28,
      "cssFiles": 16,
      "testFiles": 50,
      "developmentScripts": 30,
      "documentationFiles": 10,
      "linesOfCode": 50000,
      "functions": 400,
      "events": 50,
      "dataStructures": 30
    },
    "technologyStack": {
      "frontend": ["Vanilla JavaScript (ES6+)", "HTML5", "CSS3"],
      "buildSystem": "Vite 5.x",
      "storage": "LocalStorage API",
      "serviceWorker": "Offline support",
      "externalLibraries": ["Sentry", "Fuse.js", "html2canvas"],
      "developmentTools": ["ESLint", "Prettier", "Node.js"]
    }
  },
  "systemArchitecture": {
    "pattern": "Modular IIFE (Immediately Invoked Function Expression) Pattern",
    "layers": [
      {
        "name": "Presentation Layer",
        "description": "UI Components, DOM Manipulation"
      },
      {
        "name": "Business Logic",
        "description": "Modules, Feature Logic"
      },
      {
        "name": "Data Layer",
        "description": "Storage, State Management"
      },
      {
        "name": "Utility Layer",
        "description": "Helpers, Security, Formatters"
      },
      {
        "name": "External Services",
        "description": "CDN Libraries, APIs"
      }
    ]
  },
  "files": {
    "root": {
      "index.html": {
        "size": "15KB",
        "purpose": "Main application entry point",
        "dependencies": ["All JS modules", "CSS files"],
        "usedBy": "Browser",
        "riskLevel": "HIGH",
        "lastModified": "2025-02-28"
      },
      "story-engine.js": {
        "size": "45KB",
        "purpose": "Story generation engine",
        "dependencies": ["backstory-engine.js"],
        "usedBy": ["misc.js", "tests"],
        "riskLevel": "HIGH",
        "lastModified": "2025-02-28"
      },
      "backstory-engine.js": {
        "size": "12KB",
        "purpose": "Backstory paragraph generation",
        "dependencies": [],
        "usedBy": ["story-engine.js"],
        "riskLevel": "MEDIUM",
        "lastModified": "2025-02-28"
      },
      "styles.css": {
        "size": "8KB",
        "purpose": "Main stylesheet",
        "dependencies": [],
        "usedBy": ["index.html"],
        "riskLevel": "LOW",
        "lastModified": "2025-02-28"
      },
      "sw.js": {
        "size": "3KB",
        "purpose": "Service worker for offline support",
        "dependencies": [],
        "usedBy": ["Browser"],
        "riskLevel": "LOW",
        "lastModified": "2025-02-28"
      },
      "vite.config.js": {
        "size": "2KB",
        "purpose": "Vite build configuration",
        "dependencies": ["package.json"],
        "usedBy": ["Build system"],
        "riskLevel": "LOW",
        "lastModified": "2025-02-28"
      },
      "manifest.json": {
        "size": "1KB",
        "purpose": "PWA manifest",
        "dependencies": [],
        "usedBy": ["Browser"],
        "riskLevel": "LOW",
        "lastModified": "2025-02-28"
      }
    },
    "configuration": {
      "package.json": {
        "purpose": "Node.js dependencies and scripts",
        "riskLevel": "HIGH",
        "dependencies": 45
      },
      "package-lock.json": {
        "purpose": "Locked dependency versions",
        "riskLevel": "MEDIUM"
      },
      ".eslintrc.json": {
        "purpose": "ESLint configuration",
        "riskLevel": "LOW"
      },
      ".prettierrc.json": {
        "purpose": "Prettier configuration",
        "riskLevel": "LOW"
      },
      ".gitignore": {
        "purpose": "Git ignore rules",
        "riskLevel": "LOW"
      }
    },
    "documentation": {
      "README.md": {
        "purpose": "Project documentation",
        "riskLevel": "LOW",
        "lastUpdated": "2025-02-28"
      },
      "CHANGELOG.md": {
        "purpose": "Change log",
        "riskLevel": "LOW",
        "lastUpdated": "2025-02-28"
      },
      "CONTRIBUTING.md": {
        "purpose": "Contributing guidelines",
        "riskLevel": "LOW",
        "lastUpdated": "2025-02-28"
      },
      "PROJECT_TODO.md": {
        "purpose": "Unified TODO system",
        "riskLevel": "MEDIUM",
        "lastUpdated": "2025-02-28"
      },
      "PROJECT_CONSOLIDATION_MASTER.md": {
        "purpose": "Consolidation tracking",
        "riskLevel": "LOW",
        "lastUpdated": "2025-02-28"
      },
      "CONSOLIDATION_SUMMARY.md": {
        "purpose": "Consolidation summary",
        "riskLevel": "LOW",
        "lastUpdated": "2025-02-28"
      },
      "BUILD_SYSTEM_SETUP.md": {
        "purpose": "Build system documentation",
        "riskLevel": "LOW",
        "lastUpdated": "2025-02-28"
      },
      "CI_CD_SETUP.md": {
        "purpose": "CI/CD documentation",
        "riskLevel": "LOW",
        "lastUpdated": "2025-02-28"
      },
      "LINTING_SETUP.md": {
        "purpose": "Linting documentation",
        "riskLevel": "LOW",
        "lastUpdated": "2025-02-28"
      },
      "SERVICE_WORKER_IMPLEMENTATION.md": {
        "purpose": "Service worker docs",
        "riskLevel": "LOW",
        "lastUpdated": "2025-02-28"
      },
      "MASTER_SYSTEM_RULE.md": {
        "purpose": "Master system rules",
        "riskLevel": "HIGH",
        "lastUpdated": "2025-02-28"
      }
    }
  },
  "functions": {
    "coreModules": {
      "app-state.js": {
        "purpose": "Central application state management",
        "functions": [
          {
            "name": "getState",
            "description": "Returns current application state",
            "parameters": [],
            "returns": "StateObject"
          },
          {
            "name": "setState",
            "description": "Updates application state",
            "parameters": ["newState"],
            "returns": "void"
          },
          {
            "name": "subscribe",
            "description": "Subscribe to state changes",
            "parameters": ["callback"],
            "returns": "void"
          },
          {
            "name": "unsubscribe",
            "description": "Unsubscribe from state changes",
            "parameters": ["callback"],
            "returns": "void"
          },
          {
            "name": "resetState",
            "description": "Resets to initial state",
            "parameters": [],
            "returns": "void"
          }
        ],
        "stateProperties": [
          "chapters",
          "currentChapter",
          "totalGenerated",
          "paused",
          "isAdmin",
          "user"
        ],
        "dependencies": [],
        "usedBy": ["All modules"],
        "riskLevel": "HIGH"
      },
      "auth.js": {
        "purpose": "User authentication system",
        "functions": [
          {
            "name": "register",
            "description": "Registers new user",
            "parameters": [],
            "returns": "success/error status"
          },
          {
            "name": "login",
            "description": "Authenticates user",
            "parameters": [],
            "returns": "user object"
          },
          {
            "name": "loginUser",
            "description": "Sets logged-in user",
            "parameters": ["user"],
            "returns": "void"
          },
          {
            "name": "logout",
            "description": "Logs out current user",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "getUsers",
            "description": "Retrieves all users from storage",
            "parameters": [],
            "returns": "UserObject[]"
          },
          {
            "name": "getCurrentUser",
            "description": "Returns current logged-in user",
            "parameters": [],
            "returns": "UserObject | null"
          },
          {
            "name": "isAuthenticated",
            "description": "Checks if user is logged in",
            "parameters": [],
            "returns": "boolean"
          },
          {
            "name": "updateUserProfile",
            "description": "Updates user profile",
            "parameters": ["updates"],
            "returns": "void"
          }
        ],
        "dependencies": ["storage.js", "security.js"],
        "usedBy": ["index.html"],
        "riskLevel": "HIGH"
      },
      "navigation.js": {
        "purpose": "Chapter navigation functions",
        "functions": [
          {
            "name": "nextChapter",
            "description": "Navigate to next chapter",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "prevChapter",
            "description": "Navigate to previous chapter",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "jumpToChapter",
            "description": "Jump to specific chapter",
            "parameters": ["num"],
            "returns": "void"
          },
          {
            "name": "jumpToLatestChapter",
            "description": "Jump to most recent chapter",
            "parameters": [],
            "returns": "void"
          }
        ],
        "dependencies": ["misc.js"],
        "usedBy": ["index.html"],
        "riskLevel": "HIGH"
      },
      "misc.js": {
        "purpose": "Miscellaneous core functions",
        "functions": [
          {
            "name": "showChapter",
            "description": "Displays chapter content",
            "parameters": ["num"],
            "returns": "void"
          },
          {
            "name": "getTotalChaptersShouldExist",
            "description": "Calculates expected chapter count",
            "parameters": [],
            "returns": "number"
          },
          {
            "name": "addSidebarItem",
            "description": "Adds chapter to sidebar",
            "parameters": ["chapter"],
            "returns": "void"
          },
          {
            "name": "updateBadge",
            "description": "Updates chapter count badge",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "getChapterStats",
            "description": "Returns chapter statistics",
            "parameters": ["chapterNum"],
            "returns": "ChapterStats"
          },
          {
            "name": "updateStatsBar",
            "description": "Updates statistics display",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "updateTextSizeInput",
            "description": "Updates text size input",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "initDropdownClose",
            "description": "Initializes dropdown close handler",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "catchUpAndStart",
            "description": "Catches up to current time and starts generation",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "generateNewChapter",
            "description": "Generates a new chapter",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "setChapterSpeed",
            "description": "Sets chapter generation speed",
            "parameters": ["ms"],
            "returns": "void"
          },
          {
            "name": "updateNavButtons",
            "description": "Updates navigation button states",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "updateDropdownStats",
            "description": "Updates dropdown statistics",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "updateAdminProgressInfo",
            "description": "Updates admin progress display",
            "parameters": [],
            "returns": "void"
          }
        ],
        "dependencies": ["story-engine.js", "backstory-engine.js"],
        "usedBy": ["index.html"],
        "riskLevel": "HIGH"
      },
      "generation.js": {
        "purpose": "Chapter generation timer",
        "functions": [
          {
            "name": "startGeneration",
            "description": "Starts automatic chapter generation",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "stopGeneration",
            "description": "Stops automatic generation",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "pauseGeneration",
            "description": "Pauses generation temporarily",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "resumeGeneration",
            "description": "Resumes paused generation",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "setGenerationInterval",
            "description": "Sets generation interval",
            "parameters": ["ms"],
            "returns": "void"
          }
        ],
        "dependencies": ["app-state.js"],
        "usedBy": ["index.html"],
        "riskLevel": "MEDIUM"
      },
      "initialization.js": {
        "purpose": "Application initialization",
        "functions": [
          {
            "name": "initialize",
            "description": "Initializes entire application",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "loadModules",
            "description": "Loads all required modules",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "setupEventListeners",
            "description": "Sets up global event listeners",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "initializeState",
            "description": "Initializes application state",
            "parameters": [],
            "returns": "void"
          },
          {
            "name": "handleInitializationError",
            "description": "Handles initialization errors",
            "parameters": ["error"],
            "returns": "void"
          }
        ],
        "dependencies": ["All modules"],
        "usedBy": ["index.html"],
        "riskLevel": "HIGH"
      },
      "story-timeline.js": {
        "purpose": "Story timeline calculations",
        "functions": [
          {
            "name": "calculateTimeline",
            "description": "Calculates timeline for chapter",
            "parameters": ["chapterNum"],
            "returns": "Timeline"
          },
          {
            "name": "getTimelineEvents",
            "description": "Returns timeline events",
            "parameters": ["chapterNum"],
            "returns": "TimelineEvent[]"
          },
          {
            "name": "formatTimelineDate",
            "description": "Formats timeline date",
            "parameters": ["date"],
            "returns": "string"
          },
          {
            "name": "getTimelineSummary",
            "description": "Returns timeline summary",
            "parameters": ["chapterNum"],
            "returns": "string"
          }
        ],
        "dependencies": ["app-state.js"],
        "usedBy": ["misc.js"],
        "riskLevel": "MEDIUM"
      }
    },
    "featureModules": {
      "ab-testing.js": {
        "purpose": "A/B testing functionality",
        "functions": [
          "createTest",
          "assignUserToTest",
          "trackConversion",
          "getTestResults",
          "endTest"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["ab-testing-ui.js"],
        "riskLevel": "MEDIUM"
      },
      "achievements.js": {
        "purpose": "Achievement system",
        "functions": [
          "unlockAchievement",
          "getAchievements",
          "getAchievementProgress",
          "updateAchievementProgress",
          "checkAchievements"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["user-features-ui.js"],
        "riskLevel": "MEDIUM"
      },
      "admin.js": {
        "purpose": "Admin panel functions",
        "functions": [
          "isAdmin",
          "setAdminMode",
          "getAdminStats",
          "resetUserProgress",
          "banUser",
          "unbanUser",
          "getSystemLogs"
        ],
        "dependencies": ["misc.js"],
        "usedBy": ["index.html"],
        "riskLevel": "HIGH"
      },
      "analytics.js": {
        "purpose": "Analytics tracking",
        "functions": [
          "trackEvent",
          "trackPageView",
          "trackUserAction",
          "getAnalyticsData",
          "exportAnalytics"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["analytics-ui.js"],
        "riskLevel": "LOW"
      },
      "api.js": {
        "purpose": "API integration",
        "functions": [
          "fetchData",
          "postData",
          "putData",
          "deleteData",
          "handleApiError"
        ],
        "dependencies": ["storage.js", "security.js"],
        "usedBy": ["Various"],
        "riskLevel": "MEDIUM"
      },
      "backup.js": {
        "purpose": "Backup functionality",
        "functions": [
          "createBackup",
          "restoreBackup",
          "scheduleBackup",
          "getBackupHistory",
          "deleteBackup"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["backup-ui.js"],
        "riskLevel": "MEDIUM"
      },
      "bookmarks.js": {
        "purpose": "Bookmark system",
        "functions": [
          "addBookmark",
          "removeBookmark",
          "getBookmarks",
          "isBookmarked",
          "exportBookmarks"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["bookmarks-ui.js"],
        "riskLevel": "MEDIUM"
      },
      "branching-narrative.js": {
        "purpose": "Branching story paths",
        "functions": [
          "createBranch",
          "getBranches",
          "selectBranch",
          "mergeBranches",
          "getBranchHistory"
        ],
        "dependencies": ["story-engine.js"],
        "usedBy": ["Various"],
        "riskLevel": "HIGH"
      },
      "content-management.js": {
        "purpose": "Content management",
        "functions": [
          "getContent",
          "updateContent",
          "deleteContent",
          "searchContent",
          "validateContent"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["content-management-ui.js"],
        "riskLevel": "MEDIUM"
      },
      "dynamic-content.js": {
        "purpose": "Dynamic content generation",
        "functions": [
          "generateContent",
          "getGeneratedContent",
          "updateGeneratedContent",
          "deleteGeneratedContent"
        ],
        "dependencies": ["story-engine.js"],
        "usedBy": ["Various"],
        "riskLevel": "HIGH"
      },
      "fuzzy-search.js": {
        "purpose": "Fuzzy search functionality",
        "functions": [
          "search",
          "highlightMatches",
          "getSearchSuggestions"
        ],
        "dependencies": ["fuse.js (CDN)"],
        "usedBy": ["search-ui-enhanced.js"],
        "riskLevel": "MEDIUM"
      },
      "leaderboards.js": {
        "purpose": "Leaderboard system",
        "functions": [
          "getLeaderboard",
          "updateLeaderboard",
          "getUserRank",
          "getTopUsers"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["leaderboards-ui.js"],
        "riskLevel": "MEDIUM"
      },
      "messaging.js": {
        "purpose": "Messaging system",
        "functions": [
          "sendMessage",
          "getMessages",
          "markAsRead",
          "deleteMessage",
          "getUnreadCount"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["Various"],
        "riskLevel": "MEDIUM"
      },
      "notifications.js": {
        "purpose": "Notification system",
        "functions": [
          "showNotification",
          "dismissNotification",
          "getNotifications",
          "markAsRead",
          "clearNotifications"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["notifications-ui.js"],
        "riskLevel": "MEDIUM"
      },
      "performance-advanced.js": {
        "purpose": "Advanced performance monitoring",
        "functions": [
          "startProfiling",
          "stopProfiling",
          "getMemoryUsage",
          "getCpuUsage",
          "analyzePerformance"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["performance-ui.js"],
        "riskLevel": "LOW"
      },
      "performance.js": {
        "purpose": "Performance monitoring",
        "functions": [
          "trackMetric",
          "getMetrics",
          "getAverageMetric",
          "resetMetrics"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["performance-ui.js"],
        "riskLevel": "LOW"
      },
      "reading-history.js": {
        "purpose": "Reading history tracking",
        "functions": [
          "addToHistory",
          "getHistory",
          "clearHistory",
          "exportHistory",
          "getReadingStats"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["reading-history-ui.js"],
        "riskLevel": "MEDIUM"
      },
      "save-load.js": {
        "purpose": "Save/load functionality",
        "functions": [
          "createSaveSlot",
          "saveGame",
          "loadGame",
          "deleteSaveSlot",
          "getSaveSlots",
          "captureGameState",
          "restoreGameState",
          "captureScreenshot"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["save-load-ui.js"],
        "riskLevel": "HIGH"
      },
      "screenshot-capture.js": {
        "purpose": "Screenshot capture",
        "functions": [
          "captureScreenshot",
          "captureFullPage",
          "downloadScreenshot",
          "getScreenshotFormat"
        ],
        "dependencies": ["html2canvas (CDN)"],
        "usedBy": ["screenshot-ui.js"],
        "riskLevel": "LOW"
      },
      "search-suggestions.js": {
        "purpose": "Search suggestions",
        "functions": [
          "getSuggestions",
          "updateSuggestions",
          "clearSuggestions",
          "selectSuggestion"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["search-ui-enhanced.js"],
        "riskLevel": "MEDIUM"
      },
      "search.js": {
        "purpose": "Search functionality",
        "functions": [
          "search",
          "searchChapters",
          "searchUsers",
          "getSearchResults",
          "clearSearch"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["search-ui.js"],
        "riskLevel": "MEDIUM"
      },
      "social-features.js": {
        "purpose": "Social features",
        "functions": [
          "followUser",
          "unfollowUser",
          "getFollowers",
          "getFollowing",
          "shareContent"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["Various"],
        "riskLevel": "MEDIUM"
      },
      "social-sharing.js": {
        "purpose": "Social sharing",
        "functions": [
          "shareToTwitter",
          "shareToFacebook",
          "shareToLinkedIn",
          "shareToEmail",
          "copyToClipboard"
        ],
        "dependencies": ["Various"],
        "usedBy": ["social-sharing-ui.js"],
        "riskLevel": "LOW"
      },
      "user-preferences.js": {
        "purpose": "User preferences",
        "functions": [
          "getPreferences",
          "setPreference",
          "getPreference",
          "resetPreferences",
          "exportPreferences"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["user-features-ui.js"],
        "riskLevel": "MEDIUM"
      },
      "user-profiles.js": {
        "purpose": "User profiles",
        "functions": [
          "getProfile",
          "updateProfile",
          "getProfileStats",
          "setAvatar",
          "getAvatar"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["user-features-ui.js"],
        "riskLevel": "MEDIUM"
      }
    },
    "uiComponents": {
      "sidebar.js": {
        "purpose": "Sidebar navigation",
        "functions": [
          "toggleSidebar",
          "updateSidebar",
          "addChapterToSidebar",
          "removeChapterFromSidebar",
          "scrollToChapter"
        ],
        "dependencies": ["misc.js"],
        "usedBy": ["index.html"],
        "riskLevel": "HIGH"
      },
      "dropdown.js": {
        "purpose": "Dropdown menu",
        "functions": [
          "toggleDropdown",
          "openDropdown",
          "closeDropdown",
          "updateDropdownContent"
        ],
        "dependencies": ["misc.js"],
        "usedBy": ["index.html"],
        "riskLevel": "MEDIUM"
      },
      "stats.js": {
        "purpose": "Stats display",
        "functions": [
          "updateStats",
          "getStats",
          "formatStat",
          "renderStats"
        ],
        "dependencies": ["misc.js"],
        "usedBy": ["index.html"],
        "riskLevel": "MEDIUM"
      },
      "text-size.js": {
        "purpose": "Text size control",
        "functions": [
          "setTextSize",
          "getTextSize",
          "increaseTextSize",
          "decreaseTextSize",
          "resetTextSize"
        ],
        "dependencies": ["storage.js"],
        "usedBy": ["index.html"],
        "riskLevel": "LOW"
      },
      "modals.js": {
        "purpose": "Modal system",
        "functions": [
          "showModal",
          "hideModal",
          "closeAllModals",
          "createModal",
          "destroyModal"
        ],
        "dependencies": ["misc.js"],
        "usedBy": ["index.html"],
        "riskLevel": "MEDIUM"
      },
      "notifications.js": {
        "purpose": "Notification display",
        "functions": [
          "showNotification",
          "hideNotification",
          "clearAllNotifications",
          "updateNotification"
        ],
        "dependencies": ["safe-html.js"],
        "usedBy": ["index.html"],
        "riskLevel": "MEDIUM"
      },
      "keyboard-shortcuts.js": {
        "purpose": "Keyboard shortcuts",
        "functions": [
          "registerShortcut",
          "unregisterShortcut",
          "getShortcuts",
          "resetShortcuts"
        ],
        "dependencies": ["Various"],
        "usedBy": ["index.html"],
        "riskLevel": "LOW"
      }
    },
    "utilities": {
      "security.js": {
        "purpose": "Security utilities",
        "functions": [
          "hashPassword",
          "validatePassword",
          "sanitizeInput",
          "escapeHtml",
          "generateToken",
          "validateToken"
        ],
        "dependencies": [],
        "usedBy": ["auth.js", "api.js"],
        "riskLevel": "HIGH"
      },
      "safe-html.js": {
        "purpose": "HTML sanitization",
        "functions": [
          "sanitize",
          "stripTags",
          "escapeHtml",
          "isSafeHtml"
        ],
        "dependencies": [],
        "usedBy": ["notifications.js"],
        "riskLevel": "HIGH"
      },
      "storage.js": {
        "purpose": "Local storage management",
        "functions": [
          "get",
          "set",
          "remove",
          "clear",
          "getChapterContent",
          "setChapterContent",
          "getAllChapters",
          "exportData",
          "importData"
        ],
        "dependencies": [],
        "usedBy": ["All modules"],
        "riskLevel": "HIGH"
      },
      "helpers.js": {
        "purpose": "Helper functions",
        "functions": [
          "debounce",
          "throttle",
          "deepClone",
          "mergeObjects",
          "formatDate",
          "formatNumber",
          "generateId"
        ],
        "dependencies": [],
        "usedBy": ["Various"],
        "riskLevel": "MEDIUM"
      },
      "formatters.js": {
        "purpose": "Data formatting",
        "functions": [
          "formatChapterNumber",
          "formatDate",
          "formatTime",
          "formatDuration",
          "formatFileSize",
          "formatPercentage"
        ],
        "dependencies": [],
        "usedBy": ["Various"],
        "riskLevel": "LOW"
      },
      "ui-helpers.js": {
        "purpose": "UI helper functions",
        "functions": [
          "createElement",
          "addClass",
          "removeClass",
          "toggleClass",
          "showElement",
          "hideElement",
          "scrollToElement"
        ],
        "dependencies": [],
        "usedBy": ["Various"],
        "riskLevel": "MEDIUM"
      },
      "prompt-modal.js": {
        "purpose": "Prompt modal",
        "functions": [
          "showPrompt",
          "showConfirm",
          "showAlert"
        ],
        "dependencies": [],
        "usedBy": ["Various"],
        "riskLevel": "MEDIUM"
      },
      "lazy-loader.js": {
        "purpose": "Lazy loading",
        "functions": [
          "loadScript",
          "loadStylesheet",
          "loadImage",
          "observeElements"
        ],
        "dependencies": [],
        "usedBy": ["Various"],
        "riskLevel": "LOW"
      },
      "sentry.js": {
        "purpose": "Sentry error tracking",
        "functions": [
          "initSentry",
          "captureException",
          "captureMessage",
          "setUser",
          "setTag"
        ],
        "dependencies": ["Sentry (CDN)"],
        "usedBy": ["index.html"],
        "riskLevel": "LOW"
      }
    },
    "poolExpansion": {
      "dynamic-pool-expansion.js": {
        "purpose": "Dynamic pool expansion",
        "functions": [
          "expandPool",
          "getPoolSize",
          "registerPool",
          "unregisterPool",
          "getPoolStats"
        ],
        "dependencies": [],
        "usedBy": ["ever-expanding-integration.js"],
        "riskLevel": "HIGH"
      },
      "uniqueness-tracker.js": {
        "purpose": "Uniqueness tracking",
        "functions": [
          "trackItem",
          "isUnique",
          "getDuplicateCount",
          "getUniquenessStats",
          "resetTracking"
        ],
        "dependencies": [],
        "usedBy": ["ever-expanding-integration.js"],
        "riskLevel": "HIGH"
      },
      "web-content-discovery.js": {
        "purpose": "Web content discovery",
        "functions": [
          "discoverContent",
          "extractContent",
          "parseContent",
          "addToPool"
        ],
        "dependencies": [],
        "usedBy": ["dynamic-pool-expansion.js"],
        "riskLevel": "MEDIUM"
      },
      "ever-expanding-integration.js": {
        "purpose": "Integration system",
        "functions": [
          "initialize",
          "expandAllPools",
          "trackAllUniqueness",
          "getIntegrationStats",
          "configureExpansion"
        ],
        "dependencies": ["All pool systems"],
        "usedBy": ["index.html"],
        "riskLevel": "HIGH"
      }
    }
  },
  "events": {
    "domEvents": {
      "document": [
        {
          "name": "DOMContentLoaded",
          "description": "Document fully loaded and parsed",
          "usedBy": ["initialization.js", "leaderboards.js", "various UI components"],
          "triggers": "Application initialization"
        },
        {
          "name": "visibilitychange",
          "description": "Document visibility changed",
          "usedBy": ["misc.js"],
          "triggers": "Pause/resume generation based on visibility"
        },
        {
          "name": "click",
          "description": "Mouse click",
          "usedBy": ["Various UI components"],
          "triggers": "Button clicks, modal interactions, dropdown toggles"
        },
        {
          "name": "keydown",
          "description": "Key pressed",
          "usedBy": ["keyboard-shortcuts.js", "modals.js"],
          "triggers": "Keyboard shortcuts, modal close on Escape"
        },
        {
          "name": "scroll",
          "description": "Element scrolled",
          "usedBy": ["Various UI components"],
          "triggers": "Lazy loading, infinite scroll"
        }
      ],
      "window": [
        {
          "name": "load",
          "description": "Window fully loaded",
          "usedBy": ["Various components"],
          "triggers": "Final initialization steps"
        },
        {
          "name": "beforeunload",
          "description": "Window about to unload",
          "usedBy": ["misc.js", "save-load.js"],
          "triggers": "Save state, confirm before leaving"
        },
        {
          "name": "resize",
          "description": "Window resized",
          "usedBy": ["Various UI components"],
          "triggers": "Responsive layout updates"
        }
      ]
    },
    "customEvents": {
      "chapterEvents": [
        {
          "name": "chapterGenerated",
          "description": "New chapter generated",
          "detail": "{ chapter: ChapterObject }",
          "usedBy": ["misc.js", "various UI components"]
        },
        {
          "name": "chapterLoaded",
          "description": "Chapter loaded into view",
          "detail": "{ chapterNum: number }",
          "usedBy": ["misc.js", "sidebar.js"]
        },
        {
          "name": "chapterChanged",
          "description": "Current chapter changed",
          "detail": "{ from: number, to: number }",
          "usedBy": ["navigation.js", "misc.js"]
        }
      ],
      "userEvents": [
        {
          "name": "userLoggedIn",
          "description": "User logged in",
          "detail": "{ user: UserObject }",
          "usedBy": ["auth.js", "various UI components"]
        },
        {
          "name": "userLoggedOut",
          "description": "User logged out",
          "detail": "{ userId: string }",
          "usedBy": ["auth.js", "various UI components"]
        },
        {
          "name": "userRegistered",
          "description": "New user registered",
          "detail": "{ user: UserObject }",
          "usedBy": ["auth.js"]
        }
      ],
      "stateEvents": [
        {
          "name": "stateChanged",
          "description": "Application state changed",
          "detail": "{ state: StateObject, changes: Object }",
          "usedBy": ["app-state.js", "all subscribers"]
        },
        {
          "name": "generationStarted",
          "description": "Chapter generation started",
          "detail": "{ interval: number }",
          "usedBy": ["generation.js"]
        },
        {
          "name": "generationStopped",
          "description": "Chapter generation stopped",
          "detail": "{ reason: string }",
          "usedBy": ["generation.js"]
        },
        {
          "name": "generationPaused",
          "description": "Chapter generation paused",
          "detail": "{ reason: string }",
          "usedBy": ["generation.js"]
        }
      ],
      "notificationEvents": [
        {
          "name": "notificationShown",
          "description": "Notification shown",
          "detail": "{ notification: NotificationObject }",
          "usedBy": ["notifications.js"]
        },
        {
          "name": "notificationDismissed",
          "description": "Notification dismissed",
          "detail": "{ notificationId: string }",
          "usedBy": ["notifications.js"]
        }
      ],
      "errorEvents": [
        {
          "name": "errorOccurred",
          "description": "Error occurred",
          "detail": "{ error: Error, context: Object }",
          "usedBy": ["sentry.js", "error handlers"]
        }
      ]
    }
  },
  "dataStructures": {
    "AppState": {
      "chapters": "ChapterObject[]",
      "currentChapter": "number",
      "totalGenerated": "number",
      "paused": "boolean",
      "isAdmin": "boolean",
      "user": "UserObject | null",
      "generationInterval": "number | null",
      "lastGenerated": "number",
      "startTime": "number"
    },
    "ChapterObject": {
      "id": "string",
      "number": "number",
      "title": "string",
      "content": "string[]",
      "metadata": {
        "generatedAt": "number",
        "wordCount": "number",
        "paragraphCount": "number",
        "readingTime": "number"
      },
      "stats": {
        "views": "number",
        "bookmarks": "number",
        "shares": "number"
      },
      "timeline": {
        "date": "number",
        "location": "string",
        "characters": "string[]"
      },
      "choices": "ChoiceObject[] | null",
      "parentChapter": "number | null",
      "branchId": "string | null"
    },
    "UserObject": {
      "id": "string",
      "username": "string",
      "email": "string",
      "password": "string",
      "createdAt": "number",
      "lastLogin": "number",
      "profile": {
        "displayName": "string",
        "avatar": "string",
        "bio": "string"
      },
      "preferences": {
        "textSize": "number",
        "theme": "string",
        "notifications": "boolean",
        "autoSave": "boolean"
      },
      "progress": {
        "currentChapter": "number",
        "chaptersRead": "number",
        "totalReadingTime": "number",
        "bookmarks": "number[]",
        "readingHistory": "number[]"
      },
      "achievements": "AchievementObject[]",
      "stats": {
        "totalChaptersRead": "number",
        "totalReadingTime": "number",
        "longestSession": "number",
        "averageSessionTime": "number"
      },
      "isAdmin": "boolean",
      "isBanned": "boolean"
    },
    "AchievementObject": {
      "id": "string",
      "name": "string",
      "description": "string",
      "icon": "string",
      "unlockedAt": "number | null",
      "progress": "number",
      "maxProgress": "number",
      "rarity": "common | rare | epic | legendary"
    },
    "SaveSlotObject": {
      "slotId": "string",
      "name": "string",
      "createdAt": "number",
      "updatedAt": "number",
      "gameState": {
        "currentChapter": "number",
        "userProgress": "UserProgress",
        "appState": "Partial<AppState>"
      },
      "screenshot": "string | null",
      "chapterCount": "number",
      "playTime": "number"
    },
    "NotificationObject": {
      "id": "string",
      "type": "info | success | warning | error",
      "title": "string",
      "message": "string",
      "timestamp": "number",
      "read": "boolean",
      "dismissible": "boolean",
      "actions": "NotificationAction[] | null"
    },
    "NotificationAction": {
      "label": "string",
      "action": "() => void",
      "primary": "boolean"
    },
    "ChoiceObject": {
      "id": "string",
      "text": "string",
      "targetChapter": "number",
      "conditions": "Condition[] | null",
      "consequences": "Consequence[] | null"
    },
    "Condition": {
      "type": "stat | item | achievement",
      "key": "string",
      "operator": "== | != | > | < | >= | <=",
      "value": "any"
    },
    "Consequence": {
      "type": "stat | item | achievement",
      "key": "string",
      "value": "any",
      "operation": "set | add | subtract"
    },
    "PoolObject": {
      "name": "string",
      "items": "any[]",
      "generator": "() => any",
      "expansionRate": "number",
      "maxSize": "number | null",
      "lastExpanded": "number",
      "expansionCount": "number"
    },
    "UniquenessTrackingObject": {
      "type": "string",
      "id": "string",
      "firstSeen": "number",
      "count": "number",
      "isDuplicate": "boolean"
    }
  },
  "externalIntegrations": {
    "cdnLibraries": {
      "sentry": {
        "name": "@sentry/browser",
        "version": "7.77.0",
        "purpose": "Error tracking and monitoring",
        "url": "https://cdn.jsdelivr.net/npm/@sentry/browser@7.77.0/build/bundle.min.js",
        "usage": [
          "Initialize with DSN",
          "Capture exceptions",
          "Capture messages",
          "Set user context",
          "Set tags"
        ]
      },
      "fusejs": {
        "name": "Fuse.js",
        "version": "7.0.0",
        "purpose": "Fuzzy search library",
        "url": "https://cdn.jsdelivr.net/npm/fuse.js@7.0.0/dist/fuse.min.js",
        "usage": [
          "Create Fuse instance with data",
          "Perform fuzzy search",
          "Get search results with scores"
        ]
      },
      "html2canvas": {
        "name": "html2canvas",
        "version": "1.4.1",
        "purpose": "Screenshot capture",
        "url": "https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js",
        "usage": [
          "Capture element as canvas",
          "Convert canvas to data URL",
          "Download screenshot"
        ]
      }
    },
    "nodeDependencies": {
      "development": [
        "vite@5.x",
        "eslint@8.x",
        "prettier@3.x",
        "@vitejs/plugin-legacy@5.x"
      ],
      "production": []
    }
  },
  "performanceMetrics": {
    "generation": {
      "chapterGenerationSpeed": {
        "average": "2000 chapters/second",
        "withPoolExpansion": "1900 chapters/second",
        "withUniquenessTracking": "1800 chapters/second"
      },
      "memoryUsage": {
        "baseApplication": "50MB",
        "per1000Chapters": "10MB",
        "per10000Chapters": "100MB"
      },
      "storageUsage": {
        "perChapter": "5KB",
        "per1000Chapters": "5MB",
        "per10000Chapters": "50MB"
      }
    },
    "ui": {
      "pageLoadTime": {
        "initialLoad": "2 seconds",
        "subsequentLoads": "1 second (with service worker)",
        "chapterNavigation": "100ms"
      },
      "renderingPerformance": {
        "chapterDisplay": "50ms",
        "sidebarUpdate": "30ms",
        "statsUpdate": "20ms"
      }
    },
    "poolExpansion": {
      "poolExpansionSpeed": {
        "250Items": "10ms",
        "100Items": "5ms",
        "50Items": "3ms"
      },
      "uniquenessTrackingSpeed": {
        "perItem": "0.1ms",
        "per1000Items": "100ms",
        "per10000Items": "1s"
      }
    }
  },
  "securityArchitecture": {
    "authentication": {
      "passwordStorage": {
        "hashing": "SHA-256",
        "salting": "User-specific salt",
        "plainTextStorage": false
      },
      "sessionManagement": {
        "type": "Token-based",
        "expiration": "24 hours",
        "autoLogout": true
      },
      "rateLimiting": {
        "loginAttempts": "5 per 15 minutes",
        "apiRequests": "100 per minute",
        "passwordReset": "3 per hour"
      }
    },
    "inputValidation": {
      "sanitization": "All user input sanitized",
      "xssPrevention": "HTML escaping",
      "sqlInjectionPrevention": "Not applicable (no SQL)",
      "validationRules": {
        "username": "3-20 characters, alphanumeric + underscore",
        "email": "Valid email format",
        "password": "Minimum 8 characters"
      }
    },
    "dataProtection": {
      "storageSecurity": {
        "encryption": "Sensitive data encrypted in localStorage",
        "urlSafety": "No sensitive data in URLs",
        "secureCookies": "Secure cookie flags (if cookies used)"
      },
      "transmissionSecurity": {
        "https": "HTTPS only (in production)",
        "queryParameters": "No sensitive data in query parameters",
        "secureHeaders": "CSP, X-Frame-Options"
      }
    }
  },
  "testingCoverage": {
    "testFiles": {
      "htmlTests": 20,
      "javascriptTests": 25,
      "pythonTests": 5
    },
    "coverage": {
      "coreSystems": {
        "storyGeneration": 95,
        "readingFunctions": 100,
        "navigation": 100,
        "authentication": 85,
        "saveLoad": 90
      },
      "featureSystems": {
        "bookmarks": 80,
        "search": 75,
        "analytics": 60,
        "socialFeatures": 50
      },
      "uiComponents": {
        "sidebar": 80,
        "modals": 70,
        "notifications": 65,
        "forms": 60
      }
    }
  },
  "browserCompatibility": {
    "supportedBrowsers": {
      "desktop": [
        {
          "name": "Chrome/Edge",
          "version": "90+",
          "support": "Full"
        },
        {
          "name": "Firefox",
          "version": "88+",
          "support": "Full"
        },
        {
          "name": "Safari",
          "version": "14+",
          "support": "Full"
        },
        {
          "name": "Opera",
          "version": "76+",
          "support": "Full"
        }
      ],
      "mobile": [
        {
          "name": "Chrome Mobile",
          "version": "90+",
          "support": "Full"
        },
        {
          "name": "Safari iOS",
          "version": "14+",
          "support": "Full"
        },
        {
          "name": "Firefox Mobile",
          "version": "88+",
          "support": "Full"
        },
        {
          "name": "Samsung Internet",
          "version": "14+",
          "support": "Full"
        }
      ]
    },
    "featureSupport": {
      "es6Features": {
        "arrowFunctions": "All supported browsers",
        "templateLiterals": "All supported browsers",
        "destructuring": "All supported browsers",
        "spreadOperator": "All supported browsers",
        "asyncAwait": "All supported browsers",
        "classes": "All supported browsers",
        "modules": "All supported browsers (with bundler)"
      },
      "webApis": {
        "localStorage": "All supported browsers",
        "serviceWorker": "All supported browsers",
        "fetchApi": "All supported browsers",
        "intersectionObserver": "All supported browsers",
        "resizeObserver": "All supported browsers"
      },
      "cssFeatures": {
        "flexbox": "All supported browsers",
        "grid": "All supported browsers",
        "customProperties": "All supported browsers",
        "mediaQueries": "All supported browsers"
      }
    }
  },
  "accessibilityFeatures": {
    "wcagCompliance": {
      "levelA": "Fully compliant",
      "levelAA": "Mostly compliant",
      "levelAAA": "Partially compliant"
    },
    "keyboardNavigation": {
      "shortcuts": [
        {
          "key": "Arrow Left",
          "action": "Previous chapter"
        },
        {
          "key": "Arrow Right",
          "action": "Next chapter"
        },
        {
          "key": "Home",
          "action": "First chapter"
        },
        {
          "key": "End",
          "action": "Last chapter"
        },
        {
          "key": "Escape",
          "action": "Close modal"
        },
        {
          "key": "Ctrl/Cmd + B",
          "action": "Toggle sidebar"
        },
        {
          "key": "Ctrl/Cmd + S",
          "action": "Save game"
        },
        {
          "key": "Ctrl/Cmd + F",
          "action": "Search"
        }
      ]
    },
    "screenReaderSupport": {
      "ariaLabels": "All interactive elements have ARIA labels",
      "liveRegions": "Live regions for dynamic content",
      "roleAttributes": "Role attributes for custom elements",
      "descriptiveLinkText": "Descriptive link text"
    },
    "semanticHtml": {
      "headingHierarchy": "Proper heading hierarchy",
      "semanticElements": "Semantic elements (nav, main, article, etc.)",
      "listStructures": "List structures for navigation",
      "formAssociations": "Form associations"
    }
  },
  "errorHandlingPatterns": {
    "globalErrorHandling": {
      "windowErrorHandler": "Log error, send to Sentry, show user-friendly message",
      "unhandledPromiseRejection": "Log error, send to Sentry, prevent default"
    },
    "moduleErrorHandling": {
      "tryCatchPattern": "Try-catch with logging and user notification",
      "errorBoundaries": "Each module has error handling, graceful degradation"
    },
    "specificErrorTypes": {
      "networkErrors": "Retry logic (3 attempts), offline detection, fallback to cached data",
      "storageErrors": "Quota exceeded handling, clear old data, show storage full message",
      "generationErrors": "Fallback to default content, log error, continue with next chapter"
    }
  },
  "configurationManagement": {
    "applicationConfiguration": {
      "storyConfiguration": {
        "STORY_START": "2026-02-26T00:00:00Z",
        "CHAPTER_INTERVAL_MS": 30000,
        "MAX_CHAPTERS": 10000,
        "generationMode": "unlimited",
        "storyRules": [],
        "directives": []
      },
      "poolExpansionConfiguration": {
        "enabled": true,
        "expansionRates": {
          "titles": 250,
          "paragraphs": 100,
          "characters": 50
        },
        "maxSize": null
      },
      "uniquenessTrackingConfiguration": {
        "enabled": true,
        "trackTypes": ["chapterId", "title", "paragraph"],
        "maxHistory": 10000
      }
    },
    "userPreferences": {
      "defaultPreferences": {
        "textSize": 16,
        "theme": "light",
        "notifications": true,
        "autoSave": true,
        "keyboardShortcuts": true
      }
    }
  },
  "deployment": {
    "buildSystem": {
      "name": "Vite",
      "version": "5.x",
      "commands": {
        "dev": "Start development server",
        "build": "Build for production",
        "preview": "Preview production build"
      },
      "configuration": {
        "root": "/",
        "build": {
          "outDir": "dist",
          "assetsDir": "assets",
          "sourcemap": true,
          "minify": "terser"
        },
        "server": {
          "port": 8050,
          "open": true
        }
      }
    },
    "deploymentProcess": {
      "productionDeployment": [
        "Run npm run build",
        "Upload dist/ to server",
        "Configure server for SPA routing",
        "Enable HTTPS",
        "Configure caching headers",
        "Set up CDN for static assets"
      ],
      "serviceWorkerDeployment": [
        "Build service worker",
        "Upload to server",
        "Register in application",
        "Configure cache strategies",
        "Set up update mechanism"
      ]
    },
    "environmentVariables": {
      "development": {
        "NODE_ENV": "development",
        "VITE_SENTRY_DSN": "development_dsn",
        "VITE_API_URL": "http://localhost:8050"
      },
      "production": {
        "NODE_ENV": "production",
        "VITE_SENTRY_DSN": "production_dsn",
        "VITE_API_URL": "https://story-unending.com"
      }
    }
  },
  "criticalSystemsStatus": [
    {
      "system": "Pool Expansion",
      "status": "Working",
      "lastVerified": "2025-02-28",
      "riskLevel": "HIGH",
      "performance": "~10ms per expansion"
    },
    {
      "system": "Uniqueness Tracking",
      "status": "Working",
      "lastVerified": "2025-02-28",
      "riskLevel": "HIGH",
      "performance": "~0.1ms per item"
    },
    {
      "system": "Story Generation",
      "status": "Working",
      "lastVerified": "2025-02-28",
      "riskLevel": "HIGH",
      "performance": "~2000 chapters/sec"
    },
    {
      "system": "Reading Functions",
      "status": "Working",
      "lastVerified": "2025-02-28",
      "riskLevel": "HIGH",
      "performance": "<100ms per chapter"
    },
    {
      "system": "Navigation",
      "status": "Working",
      "lastVerified": "2025-02-28",
      "riskLevel": "HIGH",
      "performance": "<50ms per navigation"
    },
    {
      "system": "Authentication",
      "status": "Working",
      "lastVerified": "2025-02-28",
      "riskLevel": "HIGH",
      "performance": "<200ms per login"
    },
    {
      "system": "Save/Load",
      "status": "Working",
      "lastVerified": "2025-02-28",
      "riskLevel": "HIGH",
      "performance": "<500ms per save"
    },
    {
      "system": "State Management",
      "status": "Working",
      "lastVerified": "2025-02-28",
      "riskLevel": "HIGH",
      "performance": "<10ms per update"
    },
    {
      "system": "Event System",
      "status": "Working",
      "lastVerified": "2025-02-28",
      "riskLevel": "MEDIUM",
      "performance": "<1ms per event"
    },
    {
      "system": "Storage System",
      "status": "Working",
      "lastVerified": "2025-02-28",
      "riskLevel": "HIGH",
      "performance": "<5ms per operation"
    }
  ],
  "knownIssues": {
    "resolved": [
      {
        "issue": "Chapter ID Generation (undefined after #1)",
        "severity": "CRITICAL",
        "status": "Fixed",
        "location": "story-engine.js",
        "solution": "Added `id: chapterNum` to return statements in generateChapter()",
        "fixedDate": "2025-02-28"
      },
      {
        "issue": "Duplicate Paragraphs (85.7%)",
        "severity": "CRITICAL",
        "status": "Fixed",
        "location": "story-engine.js",
        "solution": "Enabled pool expansion and uniqueness tracking",
        "fixedDate": "2025-02-28"
      }
    ],
    "inProgress": [],
    "resolved": [
      {
        "issue": "Chapter ID Generation (undefined after #1)",
        "severity": "CRITICAL",
        "status": "Fixed",
        "location": "story-engine.js",
        "solution": "Added `id: chapterNum` to return statements in generateChapter()",
        "fixedDate": "2025-02-28"
      },
      {
        "issue": "Duplicate Paragraphs (85.7%)",
        "severity": "CRITICAL",
        "status": "Fixed",
        "location": "story-engine.js",
        "solution": "Enabled pool expansion and uniqueness tracking",
        "fixedDate": "2025-02-28"
      },
      {
        "issue": "Duplicate Titles (17.1%  0.47%)",
        "severity": "HIGH",
        "status": "Fixed",
        "location": "story-engine.js",
        "solution": "Expanded dynamic title generation with 90 adjectives, 120 nouns, 100 actions, and 45 patterns",
        "result": "Reduced duplicate titles from 513 (17.1%) to 14 (0.47%) - 97.3% improvement",
        "fixedDate": "2025-02-28"
      }
    ]
  },
  "riskAssessmentMatrix": {
    "highRisk": [
      {
        "area": "Story Generation System",
        "riskLevel": "HIGH",
        "impact": "Critical",
        "likelihood": "Low",
        "mitigation": "Comprehensive testing, pool expansion"
      },
      {
        "area": "Authentication System",
        "riskLevel": "HIGH",
        "impact": "Critical",
        "likelihood": "Low",
        "mitigation": "Secure hashing, rate limiting"
      },
      {
        "area": "Save/Load System",
        "riskLevel": "HIGH",
        "impact": "Critical",
        "likelihood": "Low",
        "mitigation": "Validation, backup system"
      },
      {
        "area": "Pool Expansion Systems",
        "riskLevel": "HIGH",
        "impact": "High",
        "likelihood": "Low",
        "mitigation": "Monitoring, fallback mechanisms"
      },
      {
        "area": "Storage System",
        "riskLevel": "HIGH",
        "impact": "High",
        "likelihood": "Medium",
        "mitigation": "Quota management, error handling"
      }
    ],
    "mediumRisk": [
      {
        "area": "UI Components",
        "riskLevel": "MEDIUM",
        "impact": "Medium",
        "likelihood": "Medium",
        "mitigation": "Responsive design, testing"
      },
      {
        "area": "Feature Modules",
        "riskLevel": "MEDIUM",
        "impact": "Medium",
        "likelihood": "Medium",
        "mitigation": "Error handling, validation"
      },
      {
        "area": "Event System",
        "riskLevel": "MEDIUM",
        "impact": "Medium",
        "likelihood": "Low",
        "mitigation": "Event delegation, cleanup"
      },
      {
        "area": "Performance",
        "riskLevel": "MEDIUM",
        "impact": "Medium",
        "likelihood": "Medium",
        "mitigation": "Monitoring, optimization"
      }
    ],
    "lowRisk": [
      {
        "area": "CSS Files",
        "riskLevel": "LOW",
        "impact": "Low",
        "likelihood": "Low",
        "mitigation": "Browser testing, fallbacks"
      },
      {
        "area": "Documentation",
        "riskLevel": "LOW",
        "impact": "Low",
        "likelihood": "Low",
        "mitigation": "Regular updates"
      },
      {
        "area": "Test Files",
        "riskLevel": "LOW",
        "impact": "Low",
        "likelihood": "Low",
        "mitigation": "Not used in production"
      }
    ]
  },
  "rollbackProcedures": {
    "phase2Consolidation": {
      "date": "2025-02-28",
      "changes": "File reorganization, console.log removal",
      "rollbackMethod": "Git revert",
      "risk": "LOW - No functional changes",
      "steps": [
        "git revert <commit-hash>",
        "Verify file structure",
        "Test functionality",
        "Deploy if needed"
      ]
    },
    "chapterIdFix": {
      "date": "2025-02-28",
      "changes": "Added `id: chapterNum` to return statements",
      "rollbackMethod": "Manual revert",
      "risk": "MEDIUM - Could break uniqueness tracking",
      "steps": [
        "Revert changes in story-engine.js",
        "Test chapter generation",
        "Verify uniqueness tracking",
        "Update documentation"
      ]
    },
    "poolExpansion": {
      "date": "2025-02-28",
      "changes": "Enabled pool expansion systems",
      "rollbackMethod": "Comment out in index.html",
      "risk": "HIGH - Would increase duplicates",
      "steps": [
        "Comment out pool expansion scripts in index.html",
        "Test chapter generation",
        "Monitor duplicate rates",
        "Update documentation"
      ]
    }
  },
  "maintenanceGuidelines": {
    "regularMaintenanceTasks": {
      "daily": [
        "Monitor error logs (Sentry)",
        "Check performance metrics",
        "Review user feedback"
      ],
      "weekly": [
        "Review and merge pull requests",
        "Update documentation",
        "Run test suites"
      ],
      "monthly": [
        "Review and update dependencies",
        "Analyze performance trends",
        "Plan new features"
      ],
      "quarterly": [
        "Major feature releases",
        "Security audits",
        "Performance optimization"
      ]
    },
    "codeQualityStandards": {
      "javascript": [
        "Use ES6+ features",
        "Follow Airbnb style guide",
        "Add JSDoc comments",
        "Write unit tests"
      ],
      "css": [
        "Use BEM naming convention",
        "Organize by component",
        "Use CSS variables",
        "Mobile-first approach"
      ],
      "documentation": [
        "Keep README updated",
        "Document all functions",
        "Update CHANGELOG",
        "Maintain system index"
      ]
    },
    "performanceOptimizationGuidelines": {
      "javascript": [
        "Minimize DOM manipulation",
        "Use event delegation",
        "Implement lazy loading",
        "Debounce/throttle events"
      ],
      "css": [
        "Minimize reflows/repaints",
        "Use CSS transforms/animations",
        "Optimize images",
        "Use CSS containment"
      ],
      "storage": [
        "Compress large data",
        "Implement caching",
        "Clean up old data",
        "Use indexedDB for large datasets"
      ]
    }
  },
  "appendix": {
    "quickReference": {
      "commonFunctions": [
        "showChapter(num) - Display chapter",
        "nextChapter() - Next chapter",
        "prevChapter() - Previous chapter",
        "generateNewChapter() - Generate chapter",
        "saveGame(slotId) - Save game",
        "loadGame(slotId) - Load game"
      ],
      "commonEvents": [
        "chapterGenerated - New chapter",
        "chapterChanged - Chapter changed",
        "stateChanged - State changed",
        "userLoggedIn - User logged in"
      ],
      "commonDataStructures": [
        "AppState - Application state",
        "ChapterObject - Chapter data",
        "UserObject - User data",
        "SaveSlotObject - Save slot data"
      ]
    },
    "contactInformation": {
      "projectRepository": "https://github.com/XxNightLordxX/Story-Unending",
      "issueTracker": "https://github.com/XxNightLordxX/Story-Unending/issues",
      "documentation": "https://github.com/XxNightLordxX/Story-Unending/wiki"
    },
    "versionHistory": [
      {
        "version": "3.0",
        "date": "2025-02-28",
        "description": "Comprehensive Index",
        "changes": [
          "Added detailed function reference",
          "Added event system documentation",
          "Added data structures documentation",
          "Added API and external integrations",
          "Added performance metrics",
          "Added security architecture",
          "Added testing coverage",
          "Added browser compatibility",
          "Added accessibility features",
          "Added error handling patterns",
          "Added configuration management",
          "Added deployment and build system",
          "Added risk assessment matrix",
          "Added rollback procedures",
          "Added maintenance guidelines"
        ]
      },
      {
        "version": "2.0",
        "date": "2025-02-28",
        "description": "Post-Consolidation Phase 2",
        "changes": [
          "Updated file inventory",
          "Updated critical systems status",
          "Updated known issues",
          "Added recent changes"
        ]
      },
      {
        "version": "1.0",
        "date": "2025-02-28",
        "description": "Initial Index",
        "changes": [
          "Basic file inventory",
          "Dependency mapping",
          "Risk assessment"
        ]
      }
    ]
  }
}