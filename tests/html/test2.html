<!DOCTYPE html>
<html>
<head>
  <title>Test 2</title>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
  <h1>Test Page 2 - Manual Generation</h1>
  <button onclick="generateChapter()">Generate Chapter</button>
  <button onclick="catchUpAndStart()">Catch Up and Start</button>
  <div id="output"></div>
  
  <script src="backstory-engine.js"></script>
  <script src="story-engine.js"></script>
  <script src="js/modules/app-state.js"></script>
  <script src="js/modules/story-timeline.js"></script>
  <script src="js/modules/misc.js"></script>
  <script src="js/modules/generation.js"></script>
  <script src="js/ui/sidebar.js"></script>
  <script src="js/ui/stats.js"></script>
  <script src="js/ui/dropdown.js"></script>
  <script src="js/ui/text-size.js"></script>
  <script src="js/ui/modals.js"></script>
  <script src="js/ui/notifications.js"></script>
  <script src="js/utils/security.js"></script>
  <script src="js/utils/storage.js"></script>
  <script src="js/utils/helpers.js"></script>
  
  <script>
    console.log('Test page 2 loaded');
    console.log('StoryEngine:', typeof StoryEngine);
    console.log('AppState:', typeof AppState);
    console.log('catchUpAndStart:', typeof catchUpAndStart);
    
    function generateChapter() {
      console.log('generateChapter called');
      try {
        const chapter = StoryEngine.generateChapter();
        console.log('Chapter generated:', chapter);
        document.getElementById('output').innerHTML = '<h2>' + chapter.title + '</h2><p>' + chapter.paragraphs.join('</p><p>') + '</p>';
      } catch (error) {
        console.error('Error:', error);
        document.getElementById('output').innerHTML = '<p style="color:red">Error: ' + error.message + '</p>';
      }
    }
  </script>
</body>
</html>